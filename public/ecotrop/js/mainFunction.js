var myMap;

// Дождёмся загрузки API и готовности DOM.
ymaps.ready(init);

function init() {
  // Создание экземпляра карты и его привязка к контейнеру с
  // заданным id ("map").
  myMap = new ymaps.Map('map', {
    // При инициализации карты обязательно нужно указать
    // её центр и коэффициент масштабирования.
    center: [55.76, 37.64], // Москва
    zoom: 12
  });

  myMap.controls
    // Кнопка изменения масштаба.
    .add('zoomControl', { left: 5, top: 5 })
    // Список типов карты
    .add('typeSelector')
    // Стандартный набор кнопок
    .add('mapTools', { left: 35, top: 5 });

  // Также в метод add можно передать экземпляр класса элемента управления.
  // Например, панель управления пробками.
  //var trafficControl = new ymaps.control.TrafficControl();
  myMap.controls
    //.add(trafficControl)
    // В конструкторе элемента управления можно задавать расширенные
    // параметры, например, тип карты в обзорной карте.
    .add(
      new ymaps.control.MiniMap({
        type: 'yandex#publicMap'
      })
    );

  myMap.events.add('click', function (e) {
    if (!myMap.balloon.isOpen()) {
      var coords = e.get('coordPosition');
      myMap.balloon.open(coords, {
        contentHeader: 'Событие!',
        contentBody:
          '<p>Кто-то щелкнул по карте.</p>' +
          '<p>Координаты щелчка: ' +
          [coords[0].toPrecision(6), coords[1].toPrecision(6)].join(', ') +
          '</p>',
        contentFooter: '<sup>Щелкните еще раз</sup>'
      });
    } else {
      myMap.balloon.close();
    }
  });

  // Обработка события, возникающего при щелчке
  // правой кнопки мыши в любой точке карты.
  // При возникновении такого события покажем всплывающую подсказку
  // в точке щелчка.
  myMap.events.add('contextmenu', function (e) {
    myMap.hint.show(e.get('coordPosition'), 'Кто-то щелкнул правой кнопкой');
  });

  let arr = [];

  function radar() {
    let num = 1;

    for (let i = 0; i < arrCoordinats.length; i += 3) {
      let temp;
      let air;
      let withard;
      let people;
      let press;
      let criminal;
      let rate;

      let num = Math.floor(Math.random() * (3 - 1 + 1)) + 1;
      let color;

      if (num == 1) {
        color = 'rgba(250, 238, 7, 0.2)';
      } else if (num == 2) {
        color = 'rgba(7, 250, 24, 0.2)';
      } else if (num == 3) {
        color = 'rgba(250, 7, 7, 0.2)';
      }

      if (color == 'rgba(250, 238, 7, 0.2)') {
        temp = 'удовлетворительная';
        air = 'удовлетворительно';
        withard = 'облачно';
        people = 'средне';
        press = 'среднее';
        criminal = 'удовлетворительно';
        rate = 'средний';
      } else if (color == 'rgba(7, 250, 24, 0.2)') {
        temp = 'оптимальная';
        air = 'отлично';
        withard = 'солнце';
        people = 'много';
        press = 'оптимальное';
        criminal = 'безопасно';
        rate = 'высокий';
      } else if (color == 'rgba(250, 7, 7, 0.2)') {
        temp = 'критичная';
        air = 'плохо';
        withard = 'дождь';
        people = 'мало';
        press = 'выше или ниже нормы';
        criminal = 'опасно';
        rate = 'низкий';
      }

      var myCircle = new ymaps.Circle(
        [[arrCoordinats[i], arrCoordinats[i + 1]], 200],
        {
          balloonContent:
            'Температура: ' +
            temp +
            ';<br>Воздух: ' +
            air +
            ';<br>Погода: ' +
            withard +
            ';<br>Столпотворение: ' +
            people +
            ';<br>Давление: ' +
            press +
            ';<br>Криминогенность: ' +
            criminal +
            ';<br>Рейтинг: ' +
            rate +
            ';',
          hintContent:
            'Температура: ' +
            temp +
            ';<br>Воздух: ' +
            air +
            ';<br>Погода: ' +
            withard +
            ';<br>Столпотворение: ' +
            people +
            ';<br>Давление: ' +
            press +
            ';<br>Криминогенность: ' +
            criminal +
            ';<br>Рейтинг: ' +
            rate +
            ';'
        },
        {
          draggable: false,
          fillColor: color,
          strokeColor: color,
          strokeOpacity: 0.1,
          strokeWidth: 2
        }
      );
      myMap.geoObjects.add(myCircle);
      arr[num - 1] = myCircle;
      num++;
    }
  }
  radar();
}

function switchMenu() {
  if (document.querySelectorAll('.downMenu')[0].style.display != 'none') {
    document.querySelectorAll('.downMenu')[0].style.display = 'none';
    document.querySelectorAll('.downMenuLeft')[0].style.display = 'block';
  } else {
    document.querySelectorAll('.downMenu')[0].style.display = 'block';
    document.querySelectorAll('.downMenuLeft')[0].style.display = 'none';
  }
}

let arrCoordinats = [
  55.747288636517524,
  37.62214401794401,
  'rgba(250, 238, 7, 0.2)',
  55.746659269778846,
  37.61699417663541,
  'rgba(250, 238, 7, 0.2)',
  55.74743387354,
  37.63012627197232,
  'rgba(7, 250, 24, 0.2)',
  55.746320375770566,
  37.635190282592426,
  'rgba(250, 238, 7, 0.2)',
  55.74409328450035,
  37.63828018737759,
  'rgba(250, 238, 7, 0.2)',
  55.74215657962549,
  37.62137154174775,
  'rgba(250, 238, 7, 0.2)',
  55.73929976370573,
  37.62162903381317,
  'rgba(250, 238, 7, 0.2)',
  55.73615218099465,
  37.62205818725551,
  'rgba(7, 250, 24, 0.2)',
  55.7326653299742,
  37.621972356566324,
  'rgba(250, 7, 7, 0.2)',
  55.743609117287626,
  37.627551351318026,
  'rgba(250, 7, 7, 0.2)',
  55.74302810871486,
  37.63313034606899,
  'rgba(7, 250, 24, 0.2)',
  55.7407524081714,
  37.63536194396934,
  'rgba(250, 238, 7, 0.2)',
  55.738524997726536,
  37.63630608154255,
  'rgba(250, 238, 7, 0.2)',
  55.7352320701662,
  37.637679372558125,
  'rgba(7, 250, 24, 0.2)',
  55.73426350895969,
  37.6338169915767,
  'rgba(250, 238, 7, 0.2)',
  55.73741124461486,
  37.632014547118686,
  'rgba(250, 7, 7, 0.2)',
  55.740897669596954,
  37.62901047302199,
  'rgba(7, 250, 24, 0.2)',
  55.73581319527613,
  37.628152166137184,
  'rgba(250, 238, 7, 0.2)',
  55.73237474516632,
  37.62943962646431,
  'rgba(250, 7, 7, 0.2)',
  55.73184200031939,
  37.61553505493111,
  'rgba(7, 250, 24, 0.2)',
  55.735280497536316,
  37.616050039061946,
  'rgba(250, 238, 7, 0.2)',
  55.739590296830215,
  37.61347511840768,
  'rgba(250, 238, 7, 0.2)',
  55.73721754509775,
  37.610041890868594,
  'rgba(250, 7, 7, 0.2)',
  55.734263508884546,
  37.60609367919867,
  'rgba(7, 250, 24, 0.2)',
  55.73227788296211,
  37.61012772155704,
  'rgba(250, 238, 7, 0.2)',
  55.741042930416825,
  37.641026769408555,
  'rgba(7, 250, 24, 0.2)',
  55.73775021621984,
  37.64274338317809,
  'rgba(250, 7, 7, 0.2)',
  55.74089766949671,
  37.64875153137145,
  'rgba(250, 238, 7, 0.2)',
  55.745642578703766,
  37.64488915039,
  'rgba(7, 250, 24, 0.2)',
  55.74467427693868,
  37.65227058959898,
  'rgba(250, 238, 7, 0.2)',
  55.74835369524027,
  37.6526139123529,
  'rgba(250, 7, 7, 0.2)',
  55.750725767014764,
  37.64729240966736,
  'rgba(250, 238, 7, 0.2)',
  55.74903144480234,
  37.640254293212266,
  'rgba(7, 250, 24, 0.2)',
  55.75193595191114,
  37.652699743041374,
  'rgba(250, 238, 7, 0.2)',
  55.75527586660428,
  37.65209892822203,
  'rgba(250, 238, 7, 0.2)',
  55.75459822597037,
  37.64437416625914,
  'rgba(250, 7, 7, 0.2)',
  55.75150028967706,
  37.63690689636169,
  'rgba(7, 250, 24, 0.2)',
  55.75590509373707,
  37.63793686462341,
  'rgba(250, 7, 7, 0.2)',
  55.7585186973417,
  37.64368752075133,
  'rgba(250, 7, 7, 0.2)',
  55.761616073849765,
  37.639910970458374,
  'rgba(250, 238, 7, 0.2)',
  55.7594382567678,
  37.63484695983825,
  'rgba(250, 238, 7, 0.2)',
  55.76098693923428,
  37.629782949218125,
  'rgba(250, 238, 7, 0.2)',
  55.764374466799126,
  37.63330200744568,
  'rgba(7, 250, 24, 0.2)',
  55.76369698492354,
  37.65158394409117,
  'rgba(250, 7, 7, 0.2)',
  55.76456803086988,
  37.64325836730896,
  'rgba(250, 238, 7, 0.2)',
  55.76727782661574,
  37.64849403930603,
  'rgba(250, 238, 7, 0.2)',
  55.75958344805206,
  37.6545880181875,
  'rgba(7, 250, 24, 0.2)',
  55.770035817324725,
  37.63965347839293,
  'rgba(250, 238, 7, 0.2)',
  55.768342337459565,
  37.63381699157652,
  'rgba(250, 238, 7, 0.2)',
  55.77206789562881,
  37.629353795775764,
  'rgba(250, 7, 7, 0.2)',
  55.76843910972114,
  37.62755135131775,
  'rgba(7, 250, 24, 0.2)',
  55.77240656499803,
  37.62317398620543,
  'rgba(250, 238, 7, 0.2)',
  55.768535881735104,
  37.618882451781616,
  'rgba(250, 7, 7, 0.2)',
  55.7722614213228,
  37.614161763915384,
  'rgba(250, 238, 7, 0.2)',
  55.766261675310645,
  37.618109975585305,
  'rgba(250, 7, 7, 0.2)',
  55.76360020075234,
  37.62377480102477,
  'rgba(250, 238, 7, 0.2)',
  55.76069656588205,
  37.6181958062738,
  'rgba(250, 238, 7, 0.2)',
  55.763164669358986,
  37.61296013427673,
  'rgba(7, 250, 24, 0.2)',
  55.76703588817438,
  37.61296013427673,
  'rgba(250, 7, 7, 0.2)',
  55.77143893031396,
  37.60755280090269,
  'rgba(250, 238, 7, 0.2)',
  55.768390723188276,
  37.608840261229105,
  'rgba(250, 238, 7, 0.2)',
  55.76751976337283,
  37.60394791198669,
  'rgba(7, 250, 24, 0.2)',
  55.77008420130226,
  37.601630483397805,
  'rgba(7, 250, 24, 0.2)',
  55.76035779431803,
  37.61261681152282,
  'rgba(250, 238, 7, 0.2)',
  55.75692151590369,
  37.61150101257261,
  'rgba(250, 238, 7, 0.2)',
  55.758470298740924,
  37.60712364746033,
  'rgba(250, 238, 7, 0.2)',
  55.76001901981113,
  37.603604589232766,
  'rgba(250, 7, 7, 0.2)',
  55.76263234655928,
  37.598368917235696,
  'rgba(250, 238, 7, 0.2)',
  55.76727782650231,
  37.5969097955316,
  'rgba(250, 238, 7, 0.2)',
  55.76490676555028,
  37.59381989074636,
  'rgba(7, 250, 24, 0.2)',
  55.761567679084116,
  37.590386663207276,
  'rgba(250, 7, 7, 0.2)',
  55.76011581278938,
  37.59527901245043,
  'rgba(250, 238, 7, 0.2)',
  55.75871229043555,
  37.58729675842211,
  'rgba(250, 238, 7, 0.2)',
  55.75803470976065,
  37.59330490661547,
  'rgba(7, 250, 24, 0.2)',
  55.755033853250005,
  37.586781774291254,
  'rgba(250, 238, 7, 0.2)',
  55.75609869983494,
  37.5946781976311,
  'rgba(250, 238, 7, 0.2)',
  55.75382376485341,
  37.59218910766527,
  'rgba(7, 250, 24, 0.2)',
  55.75488864461569,
  37.604119573363484,
  'rgba(250, 7, 7, 0.2)',
  55.754210997225655,
  37.60926941467208,
  'rgba(250, 238, 7, 0.2)',
  55.75488864460311,
  37.61605003906167,
  'rgba(250, 238, 7, 0.2)',
  55.75164551072733,
  37.613045964965,
  'rgba(250, 7, 7, 0.2)',
  55.757695914948826,
  37.62420395446696,
  'rgba(250, 238, 7, 0.2)',
  55.76127731010007,
  37.62386063171304,
  'rgba(250, 238, 7, 0.2)',
  55.755711486220335,
  37.626693044432784,
  'rgba(250, 238, 7, 0.2)',
  55.754065785489715,
  37.62935379577556,
  'rgba(250, 7, 7, 0.2)',
  55.75120984520418,
  37.628752980956165,
  'rgba(7, 250, 24, 0.2)',
  55.75038690818322,
  37.63467529846105,
  'rgba(250, 238, 7, 0.2)',
  55.74883780297095,
  37.612530980834116,
  'rgba(250, 238, 7, 0.2)',
  55.747821169100995,
  37.60918358398351,
  'rgba(250, 238, 7, 0.2)',
  55.74559416386143,
  37.60660866332923,
  'rgba(7, 250, 24, 0.2)',
  55.74685292163901,
  37.60291794372473,
  'rgba(250, 7, 7, 0.2)',
  55.751161437608275,
  37.60429123474035,
  'rgba(250, 7, 7, 0.2)',
  55.751645510658165,
  37.59751061035071,
  'rgba(250, 238, 7, 0.2)',
  55.75150028936844,
  37.59124497009191,
  'rgba(250, 238, 7, 0.2)',
  55.75125825268955,
  37.58497932983313,
  'rgba(250, 7, 7, 0.2)',
  55.74753069737736,
  37.585665975340866,
  'rgba(7, 250, 24, 0.2)',
  55.749176674981975,
  37.59158829284578,
  'rgba(250, 238, 7, 0.2)',
  55.749225085026175,
  37.597338948973714,
  'rgba(250, 238, 7, 0.2)',
  55.746417202364256,
  37.59622315002351,
  'rgba(250, 238, 7, 0.2)',
  55.746175134007096,
  37.59150246215731,
  'rgba(250, 238, 7, 0.2)',
  55.7448679388496,
  37.58703926635652,
  'rgba(250, 7, 7, 0.2)',
  55.74147870953513,
  37.588069234618196,
  'rgba(7, 250, 24, 0.2)',
  55.74351228258921,
  37.59347656799221,
  'rgba(250, 238, 7, 0.2)',
  55.745061600147864,
  37.598197255858445,
  'rgba(250, 238, 7, 0.2)',
  55.74254392771967,
  37.602917943724655,
  'rgba(7, 250, 24, 0.2)',
  55.740026092157336,
  37.60154465270903,
  'rgba(250, 238, 7, 0.2)',
  55.737604942569526,
  37.59888390136626,
  'rgba(250, 238, 7, 0.2)',
  55.741139770300656,
  37.596051488646516,
  'rgba(250, 7, 7, 0.2)',
  55.738767113181076,
  37.59244659973051,
  'rgba(7, 250, 24, 0.2)',
  55.74055872478509,
  37.60969856811427,
  'rgba(250, 238, 7, 0.2)',
  55.74433536516888,
  37.61235931945704,
  'rgba(250, 238, 7, 0.2)',
  55.74719181084521,
  37.64883736205952,
  'rgba(250, 7, 7, 0.2)',
  55.75440461173813,
  37.640082631834915,
  'rgba(250, 238, 7, 0.2)',
  55.76098693879423,
  37.64797905517476,
  'rgba(250, 238, 7, 0.2)',
  55.752589435578415,
  37.62025574279676,
  'rgba(7, 250, 24, 0.2)',
  55.750169068782945,
  37.621972356566275,
  'rgba(250, 7, 7, 0.2)'
];

let arrData = ['Температура', 'Воздух', 'Погода', 'Столпотворение', 'Давление', 'Криминогенность', 'Рейтинг'];
